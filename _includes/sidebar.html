{% include custom/sidebarconfigs.html %}

<ul id="mysidebar" class="navgoco affix">
    {% for folder in sidebar.folders %}
        {% if folder.external_url %}
        <li><a href="{{folder.external_url}}" target="_blank">{{folder.title}}</a></li>
        {% elsif page.url == folder.url %}
        <li class="active"><a href="{{folder.url | remove: '/'}}">{{folder.title}}</a></li>
        {% elsif folder.url %}
        <li><a href="{{folder.url | remove: '/'}}">{{folder.title}}</a></li>
        {% else %}
        <li>
        <a href="#">{{ folder.title }}</a>
        <ul>
            {% for folderitem in folder.folderitems %} 
            {% if folderitem.external_url %}
            <li><a href="{{folderitem.external_url}}" target="_blank">{{folderitem.title}}</a></li>
            {% elsif page.url == folderitem.url %}
            <li class="active"><a href="{{folderitem.url | remove: '/'}}">{{folderitem.title}}</a></li>
            {% else %}
            <li><a href="{{folderitem.url | remove: '/'}}">{{folderitem.title}}</a></li>
            {% endif %} 
            {% endfor %}
        </ul>
        </li>
        {% endif %} 
    {% endfor %}
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>
    /*global $*/
    $("li.active").parents('li').toggleClass("active");
</script>
